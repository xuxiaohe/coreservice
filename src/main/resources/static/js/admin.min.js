$(function(){$(".menu_dl dl").not(".sole").find("dt").click(function(){$(this).parent("dl").find("dd").toggle();$(this).parent("dl").toggleClass("frap")})});
//popup浮层
;(function($) {
	$.fn.popupFn = function() {

		//写入遮罩
		$("body").append('<div class="ui-mask" style="background-color: #000; opacity: 0.8; filter: alpha(opacity=80); width: 100%; height: 100%; position: fixed; _position: absolute; left: 0; top: 0; z-index: 998; display: none;"></div>');

		//获取目标对象的类名
		this_class_name = this.attr("class");
		this_class_name = "." + this_class_name
		console.log(  this_class_name)

		//获取滚动条高度 for ie6
		var $scrHeight = window.screen.height;

		//获得窗口高度和对象高度，除以2居中，40微调
		var $winHeight = $(window).height();
		$h = $winHeight - this.height();
		$h = $h / 2 - 40;

		//获得窗口宽度和对象宽度，除以2居中
		var $winWidth = $(window).width();
		$w = $winWidth - this.width();
		$w = $w / 2;

		//-----结构
		$(".ui-mask").height($scrHeight).show();

		this.css({
			"position" : "fixed" ,
			"left" : "0", 
			"top": "0", 
			"z-index" : "999999" , 
			"display" : "none"
		}).animate({
			"top": $h + "px",
			"left": $w + "px"
		}).fadeIn(300);

		//关闭
		this.find(".close_mini_popup").on("click",function() {
			$(this).parents(this_class_name).fadeOut(300,function(){
				$(".ui-mask").fadeOut(300,function(){
					$(".ui-mask").remove();
				});
			});
		});

		closePopup = function(){
			$(this).parents(this_class_name).fadeOut(300,function(){
				$(".ui-mask").fadeOut(300,function(){
					$(".ui-mask").remove();
				});
			});
		};

		$("body").keyup(function(e){
			if (e.keyCode == 27) 
			{
				$(this_class_name).fadeOut(300,function(){
					$(".ui-mask").fadeOut(300,function(){
						$(".ui-mask").remove();
					});
				});
			}
		});
	};
})(jQuery);
$(function(){
	$("a.manage").click(function(){
		$(".ui-popup").popupFn();
	});
	$("#main_nav").load("menu.html");
})